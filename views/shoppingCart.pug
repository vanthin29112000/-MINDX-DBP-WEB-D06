extends layout
block content
    .body-page
        p.title-shopping My cart
        div.mycart 
            .listproduct-incart
                .listproduct-incart__title 
                    p PRODUCT DETAILS 
                    P.listproduct-incart__title-item  QUANTITY 
                    P.listproduct-incart__title-item  PRICE
                    P.listproduct-incart__title-item  TOTAL
                .listproduct-incart__list 
                    each item in shoppingCart
                        each product in listProduct
                            if product.id === item.id
                                .listproduct-incart__list-item 
                                    .product-detail 
                                        img(src=product.img, alt="")
                                        div 
                                            .product-detail__name #{product.name}
                                            .product-detail__code #{product.code}
                                    .quantity
                                        form(action='/shoppingcart', method="post", enctype="application/x-www-form-urlencoded")
                                            input(type="hidden",name="_method",value="put")
                                            input(type="hidden",name="_activeChange",value="decrease")
                                            input(type="hidden",name="id",value=product.id)
                                            button(type="submit") -
                                            
                                        input(type="text",onkeydown=`return ( event.ctrlKey || event.altKey 
                                            ||  (47<event.keyCode && event.keyCode<58 && event.shiftKey==false) 
                                            || (95<event.keyCode && event.keyCode<106)
                                            || (event.keyCode==8) || (event.keyCode==9) 
                                            || (event.keyCode>34 && event.keyCode<40) 
                                            || (event.keyCode==46) )`,value = item.quantity,readonly)

                                        form(action='/shoppingcart', method="post", enctype="application/x-www-form-urlencoded")
                                            input(type="hidden",name="_method",value="put")
                                            input(type="hidden",name="_activeChange",value="increase")
                                            input(type="hidden",name="id",value=product.id)
                                            button(type="submit") +

                                    .price #{product.price}
                                    .total #{product.price*item.quantity}
                                    
                                    form.delete-product(action='/shoppingcart', method="post", enctype="application/x-www-form-urlencoded")
                                        input(type="hidden",name="_method",value="delete")
                                        input(type="hidden",name="id",value=product.id)
                                        button(type="submit")
                                            i.fa-solid.fa-xmark.i-active

            .mycart-content  
                .mycart-title ORDER SUMMARY
                .mycart-list__item
                    each item in shoppingCart
                        each product in listProduct
                            if product.id === item.id
                                .mycart-list__item-content 
                                    p #{product.name}
                                    p.mycart__prcie #{product.price*item.quantity}$
                .mycart__total-cost
                    div.mycart__total-cost-content
                        p TOTAL COST 
                        p.mycart__prcie #{price}$
                    form(action='/checkout', method="get", enctype="application/x-www-form-urlencoded")
                        button(type="submit") CHECKOUT

                